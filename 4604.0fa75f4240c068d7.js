"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4604],{42723:(S,u,o)=>{o.d(u,{K:()=>C});var d=o(20976),_=o(12714),l=o(84653),s=o(3323),g=o(34388),y=o(9527),p=o(51628),m=o(9288);let C=(()=>{class e{}return e.\u0275fac=function(f){return new(f||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[s.Pc,p.D,_.ez,l.u5,g.aw,y.N,d.aD]]}),e})()},43742:(S,u,o)=>{o.r(u),o.d(u,{SocialRecoveryGenerateShareValidatePageModule:()=>E});var d=o(12714),_=o(84653),l=o(23345),s=o(3323),g=o(34388),y=o(42723),p=o(55956),m=o(27204),C=o(56810),e=o(9288),v=o(47898),f=o(34820);function O(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",7),e.NdJ("click",function(){const c=e.CHM(t).index;return e.oxw().selectWord(c)}),e.TgZ(1,"p",8),e._uU(2),e.qZA(),e.TgZ(3,"p",9),e._uU(4),e.qZA()()}if(2&n){const t=a.$implicit,r=a.index,i=e.oxw();e.Q6J("color",i.selectedWordIndex===r?"primary":"tertiary"),e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(t)}}function M(n,a){if(1&n&&(e.TgZ(0,"ion-button",10)(1,"p",8),e._uU(2),e.qZA(),e.TgZ(3,"p",9),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.currentSelectedWords.length+1),e.xp6(2),e.Oqu("")}}function P(n,a){1&n&&(e.TgZ(0,"ion-col",11),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",13),e.qZA(),e.kcU(),e._UZ(3,"p",14),e.ALo(4,"translate"),e.qZA()),2&n&&(e.xp6(3),e.Q6J("innerHTML",e.lcZ(4,1,"verify-key.incorrect_text"),e.oJD))}function w(n,a){1&n&&(e.TgZ(0,"ion-col",15),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",16),e.qZA(),e.kcU(),e.TgZ(3,"p",17),e._uU(4),e.ALo(5,"translate"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"verify-key.success_text")))}function W(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-row",20)(1,"ion-col")(2,"ion-button",21),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).useWord(c)}),e._uU(3),e.qZA()()()}if(2&n){const t=a.$implicit,r=e.oxw(2);e.xp6(2),e.Q6J("color",r.isSelectedWord(t)?"primary":"tertiary"),e.xp6(1),e.hij(" ",t," ")}}function A(n,a){if(1&n&&(e.TgZ(0,"ion-col",18),e.YNc(1,W,4,2,"ion-row",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.promptedWords)}}let b=(()=>{class n{constructor(){this.onNext=new e.vpe,this.onComplete=new e.vpe,this.isCompleted=!1,this.splittedSecret=[],this.currentWords=[],this.promptedWords=[],this.selectedWordIndex=null}get currentSelectedWords(){return this.currentWords.filter(t=>null!=t)}ngOnInit(){this.splittedSecret=this.secret.toLowerCase().split(" "),this.reset()}promptNextWord(){this.isFull()||this.onNext.emit(),this.promptedWords=[];const t=this.splittedSecret[this.emptySpot(this.currentWords)];this.promptedWords.push(t);const r=v.wordlists.EN;for(let i=0;i<2;i++){const c=r.filter(x=>!this.splittedSecret.find(V=>V===x));let h=(0,f.sha3_256)(t);for(let x=0;x<=i;x++)h=(0,f.sha3_256)(h);const R=c[this.stringToIntHash(h,0,c.length)];this.promptedWords.push(R)}this.promptedWords=this.shuffle(this.promptedWords)}shuffle(t){let r=t.length;for(;r>0;){const i=Math.floor(Math.random()*r);r--;const c=t[r];t[r]=t[i],t[i]=c}return t}stringToIntHash(t,r,i){let c=0;for(let h=0;h<t.length;h++)c+=t.charCodeAt(h);return c%(i-r)+r}isSelectedWord(t){return null!==this.selectedWordIndex&&this.currentWords[this.selectedWordIndex]===t}selectEmptySpot(){this.selectedWordIndex=null,this.promptNextWord()}useWord(t){const r=this.emptySpot(this.currentWords);this.selectedWordIndex=null,this.currentWords[r]=t,!this.isFull()&&r<this.splittedSecret.length-1?this.promptNextWord():this.isFull()&&(this.promptedWords=[],this.setCompletedState(this.isCorrect()))}setCompletedState(t){this.isCompleted=t,this.onComplete.emit(t)}emptySpot(t){return null!==this.selectedWordIndex?this.selectedWordIndex:t.findIndex(r=>null===r)}selectWord(t){this.selectedWordIndex=t,this.promptNextWord()}reset(){this.selectedWordIndex=null,this.currentWords=Array(this.splittedSecret.length).fill(null),this.promptNextWord()}isFull(){return this.currentWords.filter(t=>null!==t).length===this.splittedSecret.length}isCorrect(){return this.currentWords.map(t=>t||"-").join(" ").trim()===this.secret.trim()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["airgap-verify-key-alt"]],inputs:{secret:"secret"},outputs:{onNext:"onNext",onComplete:"onComplete"},decls:7,vars:5,consts:[[1,"tags-wrapper"],["class","tag","shape","round","color","tertiary",3,"color","click",4,"ngFor","ngForOf"],["class","tag current","fill","outline","shape","round","color","tertiary",4,"ngIf"],[1,"secret--container-40","ion-align-items-center"],["id","error","class","ion-padding error-wrapper",4,"ngIf"],["id","message","class","ion-padding error-wrapper",4,"ngIf"],["id","wordSelector","class","ion-padding-top",4,"ngIf"],["shape","round","color","tertiary",1,"tag",3,"color","click"],[1,"number"],[1,"text"],["fill","outline","shape","round","color","tertiary",1,"tag","current"],["id","error",1,"ion-padding","error-wrapper"],["fill","currentColor","stroke-width","0","viewBox","0 0 512 512","height","1em","width","1em",2,"overflow","visible"],["d","M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z"],[3,"innerHTML"],["id","message",1,"ion-padding","error-wrapper"],["d","M0 256C0 114.6 114.6 0 256 0s256 114.6 256 256-114.6 256-256 256S0 397.4 0 256zm371.8-44.2c10.9-10.9 10.9-28.7 0-39.6-10.9-10.9-28.7-10.9-39.6 0L224 280.4l-44.2-44.2c-10.9-10.9-28.7-10.9-39.6 0-10.9 10.9-10.9 28.7 0 39.6l64 64c10.9 10.9 28.7 10.9 39.6 0l128-128z"],[1,"ion-padding-bottom"],["id","wordSelector",1,"ion-padding-top"],["class","ion-padding-horizontal",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal"],["expand","block","shape","round",1,"typography--mono",3,"color","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,O,5,3,"ion-button",1),e.YNc(2,M,5,2,"ion-button",2),e.qZA(),e.TgZ(3,"ion-row",3),e.YNc(4,P,5,3,"ion-col",4),e.YNc(5,w,6,3,"ion-col",5),e.YNc(6,A,2,1,"ion-col",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",r.currentSelectedWords),e.xp6(1),e.Q6J("ngIf",r.currentSelectedWords.length<r.splittedSecret.length),e.xp6(2),e.Q6J("ngIf",!r.isCompleted&&!r.isCorrect()&&0===r.promptedWords.length),e.xp6(1),e.Q6J("ngIf",r.isCompleted&&r.isCorrect()&&0===r.promptedWords.length),e.xp6(1),e.Q6J("ngIf",r.promptedWords.length>0))},directives:[d.sg,s.YG,d.O5,s.Nd,s.wI],pipes:[g.X$],styles:[".secret--container-60[_ngcontent-%COMP%]{height:calc(60% - 36px)}.secret--container-40[_ngcontent-%COMP%]{height:25vh;position:fixed;width:100%;left:0;bottom:56px}hr[_ngcontent-%COMP%]{border:2px dashed var(--ion-color-primary);border-style:none none dashed;margin:8px 0}.word-placeholder[_ngcontent-%COMP%]{min-width:48px}.size__xs[_ngcontent-%COMP%]{font-size:11px}.typography--mono[_ngcontent-%COMP%]{text-transform:lowercase}[_nghost-%COMP%]{width:100%}.tags-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(95px,1fr));width:100%;margin-bottom:28vh}.tags-wrapper[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{--padding-bottom: 8px;--padding-top: 8px;--padding-start: 18px;--padding-end: 18px;--border-width: 1px height: fit-content}.tags-wrapper[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:.65rem;line-height:.75rem;color:silver;width:100%;text-align:start;margin:0 4px 0 0}.tags-wrapper[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.65rem;line-height:.75rem;text-transform:lowercase;font-weight:700;margin:0}.tags-wrapper[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{--background: transparent;--background-hover: transparent;--background-activated: transparent;--background-focused: transparent;--border-style: dashed;--border-width: 1px;--border-color: var(--ion-color-primary)}.error-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.error-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{overflow:visible;height:50px;width:50px;margin-bottom:24px}.error-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;line-height:.85rem;font-weight:500;margin:0;text-align:center}"]}),n})();function I(n,a){if(1&n&&(e.TgZ(0,"ion-button",12),e._uU(1),e.qZA()),2&n){const t=a.index,r=e.oxw();e.ekj("selected",t===r.currentShare&&r.currentShare<r.shares.length-1||r.currentShare===r.shares.length-1&&t===r.currentShare-1),e.Q6J("color",t===r.currentShare?"primary":"tertiary"),e.xp6(1),e.hij(" ",t," ")}}function Z(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"airgap-verify-key-alt",13,14),e.NdJ("onComplete",function(i){return e.CHM(t),e.oxw().onComplete(i)})("onNext",function(){return e.CHM(t),e.oxw().onNext()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("secret",t.shares[t.currentShare])}}const N=[{path:"",component:(()=>{class n{constructor(t,r,i){this.secretsService=t,this.navigationService=r,this.validated=!1,this.currentShare=0,this.isCompleted=!1,this.currentWords=[],this.promptedWords=[],this.selectedWordIndex=null,i.params.subscribe(c=>{this.currentShare=this.navigationService.getState().currentShare,this.shares=this.navigationService.getState().shares,this.secret=this.navigationService.getState().secret,this.required=this.navigationService.getState().required})}get currentShares(){return this.shares&&this.currentShare<this.shares.length?this.shares[this.currentShare].split(" "):["No shares generated, something went wrong"]}onComplete(t){this.validated=t}onNext(){this.content&&this.content.scrollToBottom(500)}prev(){this.navigationService.routeWithState("/social-recovery-generate-share-show",{shares:this.shares,currentShare:this.currentShare,secret:this.secret,required:this.required}).catch((0,p.a1)(p.qj.IONIC_NAVIGATION))}next(){this.currentShare<this.shares.length-1?this.navigationService.routeWithState("/social-recovery-generate-share-show",{shares:this.shares,currentShare:this.currentShare+1,secret:this.secret,required:this.required}).catch((0,p.a1)(p.qj.IONIC_NAVIGATION)):(this.secret.hasSocialRecovery=!0,this.secretsService.addOrUpdateSecret(this.secret).then(()=>{this.navigationService.route("/social-recovery-generate-finish").catch((0,p.a1)(p.qj.IONIC_NAVIGATION))}).catch((0,p.a1)(p.qj.SECURE_STORAGE)))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.R),e.Y36(m.f),e.Y36(l.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["airgap-social-recovery-generate-share-validate"]],viewQuery:function(t,r){if(1&t&&e.Gf(s.W2,5),2&t){let i;e.iGM(i=e.CRH())&&(r.content=i.first)}},decls:19,vars:9,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/secret-edit"],[1,"ion-padding"],[1,"content-wrapper"],[1,"center-wrapper"],[1,"states-wrapper"],["class","state","shape","round",3,"selected","color",4,"ngFor","ngForOf"],[3,"secret","onComplete","onNext",4,"ngIf"],[1,"buttons-wrapper"],["color","light","fill","clear",3,"click"],["color","light","fill","clear","fill","clear",3,"disabled","click"],["shape","round",1,"state",3,"color"],[3,"secret","onComplete","onNext"],["verify",""]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA()()(),e.TgZ(4,"ion-content",3)(5,"div",4)(6,"div",5)(7,"div",6),e.YNc(8,I,2,4,"ion-button",7),e.qZA(),e.TgZ(9,"h2"),e._uU(10,"Tap each word to match the correct order"),e.qZA(),e.YNc(11,Z,2,1,"airgap-verify-key-alt",8),e.qZA(),e.TgZ(12,"div",9)(13,"ion-button",10),e.NdJ("click",function(){return r.prev()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"ion-button",11),e.NdJ("click",function(){return r.next()}),e._uU(17),e.ALo(18,"translate"),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("ngForOf",r.shares),e.xp6(3),e.Q6J("ngIf",r.shares),e.xp6(3),e.Oqu(e.lcZ(15,5,"social-recovery-setup.back_label")),e.xp6(2),e.Q6J("disabled",!r.validated),e.xp6(1),e.hij(" ",e.lcZ(18,7,"social-recovery-setup.next_label")," "))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.W2,d.sg,s.YG,d.O5,b],pipes:[g.X$],styles:['.button--rounded[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-end: 0;--padding-start: 0;width:40px;height:40px}ion-content[_ngcontent-%COMP%]{--padding-bottom: var(--ion-padding, 64px)}.content-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.center-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:540px}h2[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.5rem;text-align:center;margin-bottom:1.5rem;color:rgba(255,255,255,.9)}.states-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:70%;gap:4px;margin-bottom:3rem}.states-wrapper[_ngcontent-%COMP%]:after{content:"";position:absolute;top:49%;left:2%;border:1px dashed rgba(255,255,255,.591);width:94%;z-index:-1}.states-wrapper[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{height:100%;font-size:large;font-weight:700;color:rgba(255,255,255,.8);width:30px;height:30px;padding:0}.states-wrapper[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 0px;--padding-end: 0px}.states-wrapper[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{margin-right:auto}.tags-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));width:100%}.tags-wrapper[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{--padding-bottom: 0px;--padding-top: 0px;--padding-start: 18px;--padding-end: 18px}.tags-wrapper[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;color:silver;width:100%;text-align:start;margin-right:4px}.tags-wrapper[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;text-transform:lowercase;font-weight:800}.buttons-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;position:fixed;width:100%;bottom:0px;padding-bottom:12px;background-color:rgba(0,0,0,.4)}.buttons-wrapper[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-top: 24px;--padding-bottom: 24px;--padding-start: 48px;--padding-end: 48px}']}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,_.u5,_.UX,s.Pc,l.Bz.forChild(N),g.aw,y.K]]}),n})()},51628:(S,u,o)=>{o.d(u,{D:()=>_});var d=o(9288);let _=(()=>{class l{}return l.\u0275fac=function(g){return new(g||l)},l.\u0275mod=d.oAB({type:l}),l.\u0275inj=d.cJS({imports:[[]]}),l})()}}]);