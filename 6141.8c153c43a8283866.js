"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6141],{42723:(T,p,i)=>{i.d(p,{K:()=>_});var g=i(20976),u=i(12714),d=i(84653),A=i(3323),a=i(34388),f=i(9527),x=i(51628),r=i(9288);let _=(()=>{class h{}return h.\u0275fac=function(m){return new(m||h)},h.\u0275mod=r.oAB({type:h}),h.\u0275inj=r.cJS({imports:[[A.Pc,x.D,u.ez,d.u5,a.aw,f.N,g.aD]]}),h})()},16141:(T,p,i)=>{i.r(p),i.d(p,{AccountAddPageModule:()=>W});var g=i(20976),u=i(12714),d=i(84653),A=i(23345),a=i(3323),f=i(34388),x=i(42723),r=i(65949),_=i(55956),h=i(27204),M=i(56810),m=i(16183),y=i(2310),I=i(66889),S=i(63181),e=i(9288);function Z(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",9)(1,"ion-avatar",10),e._UZ(2,"airgap-currency-symbol",11),e.qZA(),e.TgZ(3,"ion-label",12)(4,"h2")(5,"span",13),e._uU(6),e.qZA(),e._uU(7),e.qZA()(),e.TgZ(8,"ion-checkbox",14),e.NdJ("ngModelChange",function(s){return e.CHM(t).$implicit.isChecked=s})("click",function(){return e.CHM(t),e.oxw().onProtocolSelected()}),e.qZA()()}if(2&n){const t=c.$implicit;e.xp6(2),e.Q6J("symbol",t.details.symbol)("protocolIdentifier",t.details.identifier),e.xp6(4),e.Oqu(t.details.name),e.xp6(1),e.hij(" ",t.details.symbol," "),e.xp6(1),e.Q6J("ngModel",t.isChecked)}}function E(n,c){1&n&&(e.ynx(0),e._UZ(1,"ion-input",23),e.ALo(2,"translate"),e.BQk()),2&n&&(e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"wallet-select-coins.custom-path.placeholder")),e.Q6J("disabled",!0))}function O(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"p"),e._uU(2,"Derivation Path can only be set if one protocol is selected."),e.qZA(),e.YNc(3,E,3,4,"ng-container",18),e.BQk()),2&n){const t=e.oxw(4);e.xp6(3),e.Q6J("ngIf",!t.singleSelectedProtocol)}}function b(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-input",24),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(4).singleSelectedProtocol.customDerivationPath=s}),e.ALo(2,"translate"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(4);e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"wallet-select-coins.custom-path.placeholder")),e.Q6J("ngModel",t.singleSelectedProtocol.customDerivationPath)}}function J(n,c){if(1&n&&(e.TgZ(0,"ion-item",21)(1,"ion-label",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,O,4,1,"ng-container",18),e.YNc(5,b,3,4,"ng-container",18),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"wallet-select-coins.custom-path.label")),e.xp6(2),e.Q6J("ngIf",!t.singleSelectedProtocol),e.xp6(1),e.Q6J("ngIf",t.singleSelectedProtocol)}}function B(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",16),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"ion-checkbox",25),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(3).singleSelectedProtocol.isHDWallet=s})("ionChange",function(){return e.CHM(t),e.oxw(3).toggleHDWallet()}),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,2,"wallet-select-coins.select-type.hd-wallet_label")," "),e.xp6(2),e.Q6J("ngModel",t.singleSelectedProtocol.isHDWallet)}}function N(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"ion-item",21)(1,"ion-label",22),e._uU(2,"BIP-39 Passphrase"),e.qZA(),e.TgZ(3,"ion-input",28),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(4).bip39Passphrase=s}),e.qZA()()}if(2&n){const t=e.oxw(4);e.xp6(3),e.Q6J("type",t.revealBip39Passphrase?"text":"password")("ngModel",t.bip39Passphrase)}}function L(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,N,4,2,"ion-item",19),e.TgZ(2,"ion-item",26),e._uU(3," Reveal Passphrase "),e.TgZ(4,"ion-checkbox",27),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(3).revealBip39Passphrase=s}),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.isBip39PassphraseEnabled),e.xp6(3),e.Q6J("ngModel",t.revealBip39Passphrase)}}function U(n,c){if(1&n&&(e.ynx(0),e.YNc(1,J,6,5,"ion-item",19),e.YNc(2,B,4,4,"ion-item",20),e.YNc(3,L,5,2,"ng-container",18),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isAdvancedMode),e.xp6(1),e.Q6J("ngIf",t.singleSelectedProtocol&&"eth"===t.singleSelectedProtocol.details.identifier&&t.singleSelectedProtocol.isHDWallet),e.xp6(1),e.Q6J("ngIf",t.isBip39PassphraseEnabled)}}function H(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list",15)(1,"ion-item",16)(2,"ion-label",13),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"ion-toggle",17),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().isAdvancedMode=s}),e.qZA()(),e.YNc(6,U,4,3,"ng-container",18),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"wallet-select-coins.advanced_label")),e.xp6(2),e.Q6J("ngModel",t.isAdvancedMode),e.xp6(1),e.Q6J("ngIf",t.isAdvancedMode)}}const Q=[{path:"",component:(()=>{class n{constructor(t,o,s,l,P,v){this.secretsService=t,this.storageService=o,this.protocolService=s,this.modalController=l,this.navigationService=P,this.alertController=v,this.formValid=!1,this.isHDWallet=!1,this.isAdvancedMode=!1,this.isBip39PassphraseEnabled=I._8,this.revealBip39Passphrase=!1,this.bip39Passphrase="",this.isAppAdvancedMode$=this.storageService.subscribe(m.NT.ADVANCED_MODE_TYPE).pipe((0,S.U)(D=>D===m.$r.ADVANCED));const C=this.navigationService.getState();this.secret=C.secret}ionViewWillEnter(){const t=this.navigationService.getState();this.protocolService.getActiveProtocols().then(o=>(0,r.mG)(this,void 0,void 0,function*(){const s=t.protocol;this.protocolList=yield Promise.all(o.map(l=>(0,r.mG)(this,void 0,void 0,function*(){const[P,v,C,D]=yield Promise.all([l.getSymbol(),l.getIdentifier(),l.getName(),l.getSupportsHD()]);return{protocol:l,isHDWallet:D,customDerivationPath:void 0,isChecked:s===v,details:{symbol:P,identifier:v,name:C}}}))),this.onProtocolSelected()}))}onProtocolSelected(){setTimeout(()=>(0,r.mG)(this,void 0,void 0,function*(){const t=this.protocolList.filter(o=>o.isChecked);this.formValid=0!==t.length,t.forEach(o=>{o.customDerivationPath=void 0}),1===t.length?(this.singleSelectedProtocol=t[0],this.singleSelectedProtocol.customDerivationPath=yield this.singleSelectedProtocol.protocol.getStandardDerivationPath()):(this.singleSelectedProtocol&&(this.singleSelectedProtocol.customDerivationPath=void 0),this.singleSelectedProtocol=void 0)}),0)}toggleHDWallet(){return(0,r.mG)(this,void 0,void 0,function*(){const t=this.protocolList.filter(o=>o.isChecked);if(1===t.length){const o=t[0],s=yield o.protocol.getStandardDerivationPath();o.customDerivationPath=(yield o.protocol.getSupportsHD())&&o.isHDWallet?s:`${s}/0/0`}this.singleSelectedProtocol=1===t.length?t[0]:void 0})}addWallet(){return(0,r.mG)(this,void 0,void 0,function*(){if(yield this.storageService.get(m.NT.DISCLAIMER_HIDE_LOCAL_AUTH_ONBOARDING))this.addWalletAndReturnToAddressPage();else{const o=yield this.modalController.create({component:y.L});o.onDidDismiss().then(()=>{this.addWalletAndReturnToAddressPage()}).catch((0,_.a1)(_.qj.IONIC_MODAL)),o.present().catch((0,_.a1)(_.qj.IONIC_MODAL))}})}addWalletAndReturnToAddressPage(){return(0,r.mG)(this,void 0,void 0,function*(){const t=()=>(0,r.mG)(this,void 0,void 0,function*(){this.secretsService.addWallets(this.secret,yield Promise.all(this.protocolList.map(o=>(0,r.mG)(this,void 0,void 0,function*(){const s=o.protocol;return{protocolIdentifier:yield s.getIdentifier(),isHDWallet:o.isChecked?o.isHDWallet:yield s.getSupportsHD(),customDerivationPath:o.isChecked&&o.customDerivationPath?o.customDerivationPath:yield s.getStandardDerivationPath(),bip39Passphrase:o.isChecked?this.bip39Passphrase:"",isActive:o.isChecked}})))).then(()=>{this.navigationService.routeWithState("/accounts-list",{secret:this.secret},{replaceUrl:!0}).catch((0,_.a1)(_.qj.IONIC_NAVIGATION))}).catch((0,_.a1)(_.qj.SECURE_STORAGE))});this.bip39Passphrase.length>0?(yield this.alertController.create({header:"BIP-39 Passphrase",message:"You set a BIP-39 Passphrase. You will need to enter this passphrase again when you import your secret. If you lose your passphrase, you will lose access to your account!",backdropDismiss:!1,inputs:[{name:"understood",type:"checkbox",label:"I understand",value:"understood",checked:!1}],buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:s=>(0,r.mG)(this,void 0,void 0,function*(){s.includes("understood")&&t()})}]})).present():t()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.R),e.Y36(m.Cu),e.Y36(g.dJ),e.Y36(a.IN),e.Y36(h.f),e.Y36(a.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["airgap-account-add"]],decls:16,vars:11,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/tabs/tab-secrets"],[1,"ion-padding"],["lines","none",1,"ion-padding-bottom"],["detail","false","class","ion-no-padding",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary","shape","round",3,"disabled","click"],["detail","false",1,"ion-no-padding"],["slot","start",1,"ion-align-items-center"],[3,"symbol","protocolIdentifier"],[1,"ion-text-wrap"],[1,"font--weight__med"],["slot","end","value","protocol.protocol",3,"ngModel","ngModelChange","click"],["lines","none"],[1,"ion-no-padding"],["color","primary","slot","end",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","ion-no-padding","lines","full",4,"ngIf"],["class","ion-no-padding",4,"ngIf"],["lines","full",1,"ion-no-padding"],["position","stacked","color","primary"],[3,"disabled","placeholder"],[3,"ngModel","placeholder","ngModelChange"],["slot","end",3,"ngModel","ngModelChange","ionChange"],[1,"ion-no-padding","ion-margin-bottom"],["slot","end",3,"ngModel","ngModelChange"],["placeholder","BIP-39 Passphrase",3,"type","ngModel","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"ion-content",3)(8,"ion-list",4),e.YNc(9,Z,9,5,"ion-item",5),e.qZA(),e.YNc(10,H,7,5,"ion-list",6),e.ALo(11,"async"),e.TgZ(12,"ion-fab",7)(13,"ion-button",8),e.NdJ("click",function(){return o.addWallet()}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,5,"wallet-select-coins.title")),e.xp6(4),e.Q6J("ngForOf",o.protocolList),e.xp6(1),e.Q6J("ngIf",e.lcZ(11,7,o.isAppAdvancedMode$)),e.xp6(3),e.Q6J("disabled",!o.formValid),e.xp6(1),e.hij(" ",e.lcZ(15,9,"wallet-select-coins.create_label")," "))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.W2,a.q_,u.sg,a.Ie,a.BJ,g.zZ,a.Q$,a.nz,a.w,d.JJ,d.On,u.O5,a.ho,a.pK,a.j9,a.IJ,a.YG],pipes:[f.X$,u.Ov],styles:["airgap-currency-symbol[_ngcontent-%COMP%]{width:32px;height:32px}ion-avatar[_ngcontent-%COMP%]{display:flex}.white[_ngcontent-%COMP%]{color:#fff}ion-content[_ngcontent-%COMP%]{--padding-bottom: var(--ion-padding, 64px)}"]}),n})()}];let W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,d.u5,x.K,a.Pc,A.Bz.forChild(Q),f.aw,g.aD]]}),n})()},51628:(T,p,i)=>{i.d(p,{D:()=>u});var g=i(9288);let u=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=g.oAB({type:d}),d.\u0275inj=g.cJS({imports:[[]]}),d})()}}]);