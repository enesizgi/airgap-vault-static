"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6222],{42723:(T,g,r)=>{r.d(g,{K:()=>e});var p=r(20976),_=r(12714),o=r(84653),h=r(3323),l=r(34388),m=r(9527),y=r(51628),v=r(9288);let e=(()=>{class a{}return a.\u0275fac=function(f){return new(f||a)},a.\u0275mod=v.oAB({type:a}),a.\u0275inj=v.cJS({imports:[[h.Pc,y.D,_.ez,o.u5,l.aw,m.N,p.aD]]}),a})()},76222:(T,g,r)=>{r.r(g),r.d(g,{SecretGenerateDicePageModule:()=>Z});var p=r(12714),_=r(84653),o=r(3323),h=r(23345),l=r(65949),m=r(52971),y=r(93149),v=r(42951),e=r(9288),a=(()=>{return(t=a||(a={}))[t.DEFAULT=0]="DEFAULT",t[t.COLDCARD=1]="COLDCARD",a;var t})();let D=(()=>{class t{constructor(){this.emptyEntropy="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"}transformEntropy(n,i){return(0,l.mG)(this,void 0,void 0,function*(){return i===a.COLDCARD?n.replace(/6/g,"0"):n})}validateInput(n){return(0,l.mG)(this,void 0,void 0,function*(){if("string"!=typeof n)throw Error("Input needs to be a string");if(n.length<99)throw Error("Input length needs to be longer than 99");if(!n.split("").every(i=>"123456".includes(i)))throw Error('Input can only contain "1", "2", "3", "4", "5" and "6"');return!0})}getEntropyFromInput(n,i=a.DEFAULT){return(0,l.mG)(this,void 0,void 0,function*(){if(!(yield this.validateInput(n)))throw new Error("Invalid diceEntropy");const c=yield this.transformEntropy(n,i),s=y("sha256").update(c).digest(),u=(0,v.zv)(s);if(u===this.emptyEntropy)throw new Error("Warning! Input is emtpy");return u})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=r(55956),E=r(27204),A=r(34388),M=r(8506);const P=function(t,d){return{inputLength:t,entropyBits:d}},C=[{path:"",component:(()=>{class t{constructor(n,i,c,s){this.alertController=n,this.translateService=i,this.navigationService=c,this.diceRollService=s,this.isValid=!1,this.minLength=99,this.error="",this.entropyBits=0,this.diceRollType=a.DEFAULT,this.entropy=""}ngOnInit(){}next(){return(0,l.mG)(this,void 0,void 0,function*(){const n=yield this.diceRollService.getEntropyFromInput(this.entropy,this.diceRollType),i=new m.r(n);this.navigationService.routeWithState("secret-rules",{secret:i}).catch((0,f.a1)(f.qj.IONIC_NAVIGATION))})}updateEntropy(n){return(0,l.mG)(this,void 0,void 0,function*(){this.entropy=n,this.entropyBits=2.585*this.entropy.length,this.validateEntropy()})}validateEntropy(){return(0,l.mG)(this,void 0,void 0,function*(){if(this.entropy.length<99)return this.isValid=!1,void(this.error="");try{this.isValid=yield this.diceRollService.validateInput(this.entropy)}catch(n){this.isValid=!1,this.error=n}})}switchInputType(){return(0,l.mG)(this,void 0,void 0,function*(){this.diceRollType=this.diceRollType===a.DEFAULT?a.COLDCARD:a.DEFAULT})}scrollToBottom(){this.content.scrollToBottom(500)}selectInputType(){return(0,l.mG)(this,void 0,void 0,function*(){(yield this.alertController.create({header:this.translateService.instant("secret-generate-dice-roll.type-alert.header"),message:this.translateService.instant("secret-generate-dice-roll.type-alert.message"),backdropDismiss:!1,inputs:[{name:"default",type:"radio",label:this.translateService.instant("secret-generate-dice-roll.type-alert.default"),value:a.DEFAULT,checked:this.diceRollType===a.DEFAULT},{name:"coldcard",type:"radio",label:this.translateService.instant("secret-generate-dice-roll.type-alert.coldcard"),value:a.COLDCARD,checked:this.diceRollType===a.COLDCARD}],buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:i=>(0,l.mG)(this,void 0,void 0,function*(){this.diceRollType=i})}]})).present()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.Br),e.Y36(A.sK),e.Y36(E.f),e.Y36(D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["airgap-secret-generate-dice"]],viewQuery:function(n,i){if(1&n&&e.Gf(o.W2,5),2&n){let c;e.iGM(c=e.CRH())&&(i.content=c.first)}},decls:43,vars:21,consts:[[1,"ion-no-border"],["color","secondary"],["slot","start"],["defaultHref","/tabs/tab-settings"],["slot","end",3,"click"],["slot","icon-only","name","options-outline"],[1,"ion-padding-horizontal"],[1,"ion-padding-bottom"],[3,"minLength","gridWidth","defaultHeight","rowAddedEvent","entropyChanged"],["inputgrid",""],[1,"ion-padding"],["size","12"],[1,"button--rounded","ion-justify-content-between"],["shape","round",3,"click"],["color","tertiary",3,"disabled","click"],["name","trash-outline"],["name","chevron-forward-circle-outline"]],template:function(n,i){if(1&n){const c=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-back-button",3),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"ion-buttons",4),e.NdJ("click",function(){return i.selectInputType()}),e._UZ(8,"ion-icon",5),e.qZA()()(),e.TgZ(9,"ion-content",6)(10,"p",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"airgap-grid-input",8,9),e.NdJ("rowAddedEvent",function(){return i.scrollToBottom()})("entropyChanged",function(u){return i.updateEntropy(u)}),e.qZA()(),e.TgZ(15,"ion-footer",0)(16,"ion-toolbar")(17,"ion-row",10)(18,"ion-col",11),e._uU(19),e.ALo(20,"translate"),e.ALo(21,"number"),e.qZA(),e.TgZ(22,"ion-col",11)(23,"ion-row",12)(24,"div")(25,"ion-button",13),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).add("1")}),e._uU(26,"1"),e.qZA(),e.TgZ(27,"ion-button",13),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).add("2")}),e._uU(28,"2"),e.qZA(),e.TgZ(29,"ion-button",13),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).add("3")}),e._uU(30,"3"),e.qZA(),e.TgZ(31,"ion-button",13),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).add("4")}),e._uU(32,"4"),e.qZA(),e.TgZ(33,"ion-button",13),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).add("5")}),e._uU(34,"5"),e.qZA(),e.TgZ(35,"ion-button",13),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).add("6")}),e._uU(36,"6"),e.qZA()(),e.TgZ(37,"div")(38,"ion-button",14),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).remove()}),e._UZ(39,"ion-icon",15),e.qZA(),e.TgZ(40,"ion-button",14),e.NdJ("click",function(){return i.next()}),e._UZ(41,"ion-icon",16),e.qZA()()(),e._UZ(42,"ion-row"),e.qZA()()()()}if(2&n){const c=e.MAs(14);e.xp6(5),e.Oqu(e.lcZ(6,8,"secret-generate-dice-roll.title")),e.xp6(6),e.hij(" ",e.lcZ(12,10,"secret-generate-dice-roll.description")," "),e.xp6(2),e.Q6J("minLength",i.minLength)("gridWidth",10)("defaultHeight",10),e.xp6(6),e.hij(" ",e.xi3(20,12,"secret-generate-dice-roll.status",e.WLB(18,P,c.entropy.length,e.xi3(21,15,i.entropyBits,"1.0-1")))," "),e.xp6(19),e.Q6J("disabled",0===c.entropy.length),e.xp6(2),e.Q6J("disabled",!i.isValid)}},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.gu,o.W2,M.Z,o.fr,o.Nd,o.wI,o.YG],pipes:[A.X$,p.JJ],styles:[".button--rounded[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-end: 0;--padding-start: 0;width:40px;height:40px}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[h.Bz.forChild(C)],h.Bz]}),t})();var G=r(42723);let Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez,G.K,_.u5,o.Pc,S,A.aw]]}),t})()},51628:(T,g,r)=>{r.d(g,{D:()=>_});var p=r(9288);let _=(()=>{class o{}return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=p.oAB({type:o}),o.\u0275inj=p.cJS({imports:[[]]}),o})()}}]);