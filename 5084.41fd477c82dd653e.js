"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5084],{45084:(T,u,i)=>{i.r(u),i.d(u,{ErrorHistoryPageModule:()=>x});var c=i(12714),h=i(84653),y=i(34388),e=i(3323),p=i(23345),l=i(65949),a=i(55956),r=i(9288),f=i(20976);function m(o,s){1&o&&(r.TgZ(0,"ion-card")(1,"ion-card-content"),r._uU(2),r.ALo(3,"translate"),r.qZA()()),2&o&&(r.xp6(2),r.Oqu(r.lcZ(3,1,"error-history.empty_label")))}function H(o,s){if(1&o&&(r.ynx(0),r._uU(1),r.BQk()),2&o){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.title)}}function E(o,s){if(1&o&&(r.TgZ(0,"pre"),r._uU(1),r.qZA()),2&o){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.detail)}}function v(o,s){if(1&o){const t=r.EpF();r.TgZ(0,"ion-card",4),r.NdJ("click",function(){const g=r.CHM(t).$implicit;return g.expanded=!g.expanded}),r.TgZ(1,"ion-item")(2,"ion-label"),r._uU(3),r.ALo(4,"date"),r.qZA(),r.TgZ(5,"ion-button",9),r._uU(6,"Details"),r.qZA()(),r.TgZ(7,"ion-card-content"),r.YNc(8,H,2,1,"ng-container",7),r.YNc(9,E,2,1,"pre",7),r.qZA()()}if(2&o){const t=s.$implicit;r.xp6(3),r.Oqu(r.xi3(4,3,t.date,"yyyy-MM-dd HH:mm")),r.xp6(5),r.Q6J("ngIf",!t.expanded),r.xp6(1),r.Q6J("ngIf",t.expanded)}}const b=[{path:"",component:(()=>{class o{constructor(t,n){this.alertController=t,this.clipboardService=n,this.errorHistory=[]}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.updateList()})}updateList(){return(0,l.mG)(this,void 0,void 0,function*(){const t=new a.Y8;this.errorHistory=yield(yield t.getErrorHistory()).map(n=>({date:n[4],title:n[2].split("\n")[0],detail:n[2],expanded:!1}))})}copyErrorHistory(){return(0,l.mG)(this,void 0,void 0,function*(){if(!(this.errorHistory.length>0))return this.noErrors();(yield this.alertController.create({header:"Copy Error History",subHeader:"WARNING",message:"<b>It is possible that the error history contains your private keys, so you should ONLY use this feature if you are testing your device without any funds on it.</b><br /><br />If you encounter an error while using AirGap Vault, sending the developers your local error history could help them pinpoint the problem.<br /><br />Send this error history <b>only</b> to hi@airgap.it, along with a detailed description of your problem.",inputs:[{name:"understood",type:"checkbox",label:"I understand",value:"understood",checked:!1}],buttons:[{text:"Cancel",role:"cancel"},{text:"Copy",handler:n=>(0,l.mG)(this,void 0,void 0,function*(){if(n.includes("understood")){const d=yield(new a.Y8).getErrorHistoryFormatted();this.clipboardService.copyAndShowToast(d,"Local error history copied to clipboard")}})}]})).present().catch((0,a.a1)(a.qj.IONIC_ALERT))})}noErrors(){return(0,l.mG)(this,void 0,void 0,function*(){(yield this.alertController.create({header:"No errors",message:"No recent errors occured, we can't copy anything to your clipboard.",buttons:[{text:"Ok"}]})).present().catch((0,a.a1)(a.qj.IONIC_ALERT))})}clearErrors(){return(0,l.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Clear errors",message:"Do you want to clear your error history?",buttons:[{text:"Ok",handler:()=>{(new a.Y8).clearAll()}}]});t.present().catch((0,a.a1)(a.qj.IONIC_ALERT)),t.onDidDismiss().then(()=>{this.updateList()})})}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(e.Br),r.Y36(f.Yv))},o.\u0275cmp=r.Xpm({type:o,selectors:[["airgap-error-history"]],decls:16,vars:5,consts:[["color","secondary"],["slot","start"],["defaultHref","/tabs/tab-settings"],["slot","end"],[3,"click"],["slot","icon-only","name","download"],["slot","icon-only","name","trash"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["fill","outline","slot","end","color","secondary"]],template:function(t,n){1&t&&(r.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),r._UZ(3,"ion-back-button",2),r.qZA(),r.TgZ(4,"ion-title"),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"ion-buttons",3)(8,"ion-button",4),r.NdJ("click",function(){return n.copyErrorHistory()}),r._UZ(9,"ion-icon",5),r.qZA(),r.TgZ(10,"ion-button",4),r.NdJ("click",function(){return n.clearErrors()}),r._UZ(11,"ion-icon",6),r.qZA()()()(),r.TgZ(12,"ion-content")(13,"ion-list"),r.YNc(14,m,4,3,"ion-card",7),r.YNc(15,v,10,6,"ion-card",8),r.qZA()()),2&t&&(r.xp6(5),r.Oqu(r.lcZ(6,3,"error-history.title")),r.xp6(9),r.Q6J("ngIf",0===n.errorHistory.length),r.xp6(1),r.Q6J("ngForOf",n.errorHistory))},directives:[e.Gu,e.sr,e.Sm,e.oU,e.cs,e.wd,e.YG,e.gu,e.W2,e.q_,c.O5,e.PM,e.FN,c.sg,e.Ie,e.Q$],pipes:[y.X$,c.uU],styles:[""]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[p.Bz.forChild(b)],p.Bz]}),o})(),x=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[c.ez,h.u5,e.Pc,Z,y.aw]]}),o})()}}]);