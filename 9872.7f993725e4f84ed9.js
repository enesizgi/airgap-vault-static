"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9872],{69872:(M,u,c)=>{c.r(u),c.d(u,{SocialRecoveryImportPageModule:()=>_});var l=c(12714),s=c(84653),y=c(23345),i=c(3323),p=c(34388),g=c(52971),S=c(13390),v=c(55956),x=c(27204),b=c(47898),h=c(18099);class m{static checkMnemonic(n,e){const t=h.W.prepareMnemonic(n).split(" ");if(t.length%3!=0)throw new Error("invalid secret");t.forEach(a=>{if(-1===e.indexOf(a))throw new Error("invalid secret")})}static isValidShare(n){try{m.checkMnemonic(n.value,b.wordlists.EN)}catch(e){return{"not a social mnemonic share":!0}}return null}static isValid(n){return n.value&&h.W.validateMnemonic(n.value)?null:{"not a mnemonic":!0}}}var o=c(9288);function I(r,n){if(1&r){const e=o.EpF();o.TgZ(0,"ion-button",11),o.NdJ("click",function(){const d=o.CHM(e).$implicit;return o.oxw().setNumberOfShares(d)}),o._uU(1),o.qZA()}if(2&r){const e=n.$implicit,t=o.oxw();o.Q6J("color",e===t.numberOfShares?"primary":"tertiary"),o.xp6(1),o.hij(" ",e," ")}}function Z(r,n){if(1&r){const e=o.EpF();o.TgZ(0,"ion-item",14)(1,"ion-label",15),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"ion-textarea",16),o.NdJ("ngModelChange",function(a){const f=o.CHM(e).$implicit;return o.oxw(2).shares[f]=a}),o.qZA()()}if(2&r){const e=n.$implicit,t=o.oxw(2);o.xp6(2),o.AsE(" ",o.lcZ(3,4,"social-recovery-import.share-recovery.label")," ",e+1," "),o.xp6(2),o.Q6J("formControlName","share_"+e)("ngModel",t.shares[e])}}function A(r,n){if(1&r&&(o.TgZ(0,"ion-list")(1,"form",12),o.YNc(2,Z,5,6,"ion-item",13),o.qZA()()),2&r){const e=o.oxw();o.xp6(1),o.Q6J("formGroup",e.socialRecoveryForm),o.xp6(1),o.Q6J("ngForOf",e.getNumberArray(e.numberOfShares))}}const R=function(){return[2,3,4,5,6]},P=[{path:"",component:(()=>{class r{constructor(e,t,a){this.deviceService=e,this.navigationService=t,this.formBuilder=a,this.setNumberOfShares(2)}ionViewDidEnter(){this.deviceService.enableScreenshotProtection({routeBack:"secret-setup"})}ionViewWillLeave(){this.deviceService.disableScreenshotProtection()}setNumberOfShares(e){this.numberOfShares=e,this.shares=Array(e);const t={};this.getNumberArray(e).forEach(a=>{t["share_"+a.toString()]=["",s.kI.compose([s.kI.required,m.isValidShare])],this.socialRecoveryForm&&this.socialRecoveryForm.value["share_"+a.toString()]&&(t["share_"+a.toString()][0]=this.socialRecoveryForm.value["share_"+a.toString()])}),this.socialRecoveryForm=this.formBuilder.group(t)}recover(){try{const e=g.r.recoverSecretFromShares(this.shares);this.navigationService.routeWithState("secret-add",{secret:new g.r(e,"Recovery by Social Recovery")}).catch((0,v.a1)(v.qj.IONIC_NAVIGATION))}catch(e){console.log("oops")}}back(){this.navigationService.back()}getNumberArray(e){return Array(e).fill(0).map((t,a)=>a)}}return r.\u0275fac=function(e){return new(e||r)(o.Y36(S.U),o.Y36(x.f),o.Y36(s.qu))},r.\u0275cmp=o.Xpm({type:r,selectors:[["airgap-social-recovery-import"]],decls:21,vars:16,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/secret-setup"],[1,"ion-padding"],[1,"ion-padding-bottom"],[1,"font--weight__med"],[1,"button--rounded"],["shape","round","color","secondary-light",3,"color","click",4,"ngFor","ngForOf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary","shape","round",3,"disabled","click"],["shape","round","color","secondary-light",3,"color","click"],[3,"formGroup"],["class","ion-no-padding ion-margin-bottom",4,"ngFor","ngForOf"],[1,"ion-no-padding","ion-margin-bottom"],["color","primary","position","stacked"],["placeholder","duck goose dinosaur ...",3,"formControlName","ngModel","ngModelChange"]],template:function(e,t){1&e&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o._UZ(3,"ion-back-button",2),o.qZA(),o.TgZ(4,"ion-title"),o._uU(5),o.ALo(6,"translate"),o.qZA()()(),o.TgZ(7,"ion-content",3)(8,"p",4),o._uU(9),o.ALo(10,"translate"),o.qZA(),o.TgZ(11,"p",5),o._uU(12),o.ALo(13,"translate"),o.qZA(),o.TgZ(14,"ion-row",6),o.YNc(15,I,2,2,"ion-button",7),o.qZA(),o.YNc(16,A,3,2,"ion-list",8),o.TgZ(17,"ion-fab",9)(18,"ion-button",10),o.NdJ("click",function(){return t.recover()}),o._uU(19),o.ALo(20,"translate"),o.qZA()()()),2&e&&(o.xp6(5),o.Oqu(o.lcZ(6,7,"social-recovery-import.title")),o.xp6(4),o.Oqu(o.lcZ(10,9,"social-recovery-import.text")),o.xp6(3),o.Oqu(o.lcZ(13,11,"social-recovery-import.share-recovery.heading")),o.xp6(3),o.Q6J("ngForOf",o.DdM(15,R)),o.xp6(1),o.Q6J("ngIf",t.shares),o.xp6(2),o.Q6J("disabled",!t.socialRecoveryForm.valid),o.xp6(1),o.hij(" ",o.lcZ(20,13,"social-recovery-import.recover_label")," "))},directives:[i.Gu,i.sr,i.Sm,i.oU,i.cs,i.wd,i.W2,i.Nd,l.sg,i.YG,l.O5,i.q_,s._Y,s.JL,s.sg,i.Ie,i.Q$,i.g2,i.j9,s.JJ,s.u,i.IJ],pipes:[p.X$],styles:[".button--rounded[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-end: 0;--padding-start: 0;width:40px;height:40px}ion-content[_ngcontent-%COMP%]{--padding-bottom: var(--ion-padding, 64px)}"]}),r})()}];let _=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[l.ez,s.u5,s.UX,i.Pc,y.Bz.forChild(P),p.aw]]}),r})()}}]);