"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1154],{61154:(B,m,o)=>{o.r(m),o.d(m,{ModulePreviewPageModule:()=>W});var v=o(12714),N=o(84653),i=o(3323),f=o(23345),r=o(20976),p=o(27204),n=o(25535);const d="Module Preview",M=(0,n.PH)(`[${d}] View Initialization`),P=(0,n.PH)(`[${d}] Navigation Data Loading`),h=(0,n.PH)(`[${d}] Navigation Data Loaded`,(0,n.Ky)()),w=(0,n.PH)(`[${d}] Invalid Navigation Data`),Z=(0,n.PH)(`[${d}] Install Module`,(0,n.Ky)()),O=(0,n.PH)(`[${d}] Module Installing`),x=(0,n.PH)(`[${d}] Module Installed`),U=(0,n.PH)(`[${d}] Module Failed to Install`),G=(0,n.Lq)({moduleMetadata:{value:void 0,status:r.Tq.IDLE}},(0,n.on)(P,e=>Object.assign(Object.assign({},e),{moduleMetadata:{value:e.moduleMetadata.value,status:r.Tq.LOADING}})),(0,n.on)(h,(e,{metadata:l})=>Object.assign(Object.assign({},e),{moduleMetadata:{value:l,status:r.Tq.SUCCESS}})),(0,n.on)(w,e=>Object.assign(Object.assign({},e),{moduleMetadata:{value:e.moduleMetadata.value,status:r.Tq.ERROR}}))),H=(0,n.ZF)("modulePreview"),J=(0,n.P1)(H,e=>e.moduleMetadata);var t=o(9288),I=o(34388);function j(e,l){if(1&e&&(t.TgZ(0,"ion-item",14)(1,"span",15),t._uU(2),t.qZA()()),2&e){const a=l.$implicit;t.xp6(2),t.hij(" ",a," ")}}function b(e,l){if(1&e){const a=t.EpF();t.TgZ(0,"ion-content")(1,"ion-row",6),t._UZ(2,"airgap-titled-text",7),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-row",6),t._UZ(5,"airgap-titled-text",7),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-row",6),t._UZ(8,"airgap-titled-text",7),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"ion-row",6),t._UZ(11,"airgap-titled-text",7),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"ion-row",6)(14,"ion-label",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ion-list",9),t.YNc(18,j,3,1,"ion-item",10),t.qZA()(),t.TgZ(19,"ion-fab",11)(20,"ion-button",12),t.NdJ("click",function(){t.CHM(a);const u=t.oxw().ngIf;return t.oxw().install(u.value)}),t._UZ(21,"ion-icon",13),t._uU(22),t.ALo(23,"translate"),t.qZA()()()}if(2&e){const a=t.oxw().ngIf;t.xp6(2),t.Q6J("title",t.lcZ(3,11,"module-preview.manifest.name.label"))("text",a.value.manifest.name),t.xp6(3),t.Q6J("title",t.lcZ(6,13,"module-preview.manifest.version.label"))("text",a.value.manifest.version),t.xp6(3),t.Q6J("title",t.lcZ(9,15,"module-preview.manifest.author.label"))("text",a.value.manifest.author),t.xp6(3),t.Q6J("title",t.lcZ(12,17,"module-preview.manifest.signature.label"))("text",a.value.manifest.signature),t.xp6(4),t.Oqu(t.lcZ(16,19,"module-preview.manifest.include.description")),t.xp6(3),t.Q6J("ngForOf",a.value.manifest.include),t.xp6(4),t.hij(" ",t.lcZ(23,21,"module-preview.install-button_label")," ")}}function Q(e,l){if(1&e&&(t.ynx(0,4),t.YNc(1,b,24,23,"ion-content",5),t.BQk()),2&e){const a=l.ngIf,s=t.oxw();t.xp6(1),t.Q6J("ngIf",a.status===s.UIResourceStatus.SUCCESS)}}const z=function(e){return{name:e}},C=[{path:"",component:(()=>{class e{constructor(a,s){this.store=a,this.navigationService=s,this.UIResourceStatus=r.Tq;const u=this.navigationService.getState();u.metadata&&(0,r.LW)(u.metadata)&&(this.moduleName=u.metadata.manifest.name),this.moduleMetadata$=this.store.select(J)}ngOnInit(){this.store.dispatch(M())}install(a){this.store.dispatch(Z({metadata:a}))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(n.yh),t.Y36(p.f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["airgap-module-preview"]],decls:9,vars:9,consts:[["color","secondary"],["slot","start"],["defaultHref","/tabs/tab-settings"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[4,"ngIf"],[1,"ion-align-items-center","ion-padding-top","ion-padding-bottom"],[3,"title","text"],[1,"ion-text-uppercase"],["lines","none",1,"ion-padding-bottom"],["detail","false","class","ion-no-padding",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary","shape","round",3,"click"],["slot","start","src","assets/icons/md-check.svg"],["detail","false",1,"ion-no-padding"],[1,"typography--mono"]],template:function(a,s){1&a&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.YNc(7,Q,2,1,"ng-container",3),t.ALo(8,"async")),2&a&&(t.xp6(5),t.Oqu(t.xi3(6,2,"module-preview.title",t.VKq(7,z,s.moduleName))),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,5,s.moduleMetadata$)))},directives:[i.Gu,i.sr,i.Sm,i.oU,i.cs,i.wd,v.O5,i.W2,i.Nd,r.Jo,i.Q$,i.q_,v.sg,i.Ie,i.IJ,i.YG,i.gu],pipes:[I.X$,v.Ov],styles:[""]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(C)],f.Bz]}),e})();var c=o(32256),g=o(65949),T=o(30243),A=o(48060),S=o(67926),y=o(24586),L=o(39141),R=o(29508),$=o(55956);let Y=(()=>{class e{constructor(a,s,u){this.actions$=a,this.navigationService=s,this.isolatedModuleService=u,this.navigationData$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(M),(0,y.w)(()=>(0,T.z)((0,A.of)(P()),(0,S.D)(this.loadNavigationData()).pipe((0,L.P)()))))),this.installModule$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(Z),(0,y.w)(({metadata:F})=>(0,T.z)((0,A.of)(O()),(0,S.D)(this.installModule(F)).pipe((0,L.P)()))))),this.moduleInstalled$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(x),(0,R.b)(()=>this.navigateToHome())),{dispatch:!1})}loadNavigationData(){return(0,g.mG)(this,void 0,void 0,function*(){const a=this.navigationService.getState();return(0,r.LW)(a.metadata)?h({metadata:a.metadata}):w()})}installModule(a){return(0,g.mG)(this,void 0,void 0,function*(){try{return yield this.isolatedModuleService.installModule(a),x()}catch(s){return console.error(s),U()}})}navigateToHome(){return(0,g.mG)(this,void 0,void 0,function*(){this.navigationService.route("/").catch((0,$.a1)($.qj.IONIC_NAVIGATION))})}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(c.eX),t.LFG(p.f),t.LFG(r.Tg))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),W=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.ez,N.u5,i.Pc,E,I.aw,n.Aw.forFeature("modulePreview",G),c.sQ.forFeature([Y]),r.aD]]}),e})()}}]);