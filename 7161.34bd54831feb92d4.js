"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7161],{42723:(T,f,o)=>{o.d(f,{K:()=>c});var t=o(20976),h=o(12714),n=o(84653),u=o(3323),m=o(34388),A=o(9527),e=o(51628),r=o(9288);let c=(()=>{class d{}return d.\u0275fac=function(g){return new(g||d)},d.\u0275mod=r.oAB({type:d}),d.\u0275inj=r.cJS({imports:[[u.Pc,e.D,h.ez,n.u5,m.aw,A.N,t.aD]]}),d})()},40644:(T,f,o)=>{o.d(f,{E:()=>r});var t=o(9288),h=o(3323),n=o(12714),u=o(84653);function m(c,d){if(1&c&&t._UZ(0,"ion-checkbox",7),2&c){const p=t.oxw();t.Q6J("ngModel",p.checkboxValue)("disabled",!p.enabled)}}function A(c,d){1&c&&(t.TgZ(0,"p"),t._uU(1,"This setting is disabled. Import your secret again to change it."),t.qZA())}const e=["*"];let r=(()=>{class c{constructor(){this.enabled=!1,this.action=new t.vpe}doAction(){this.action.emit()}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["airgap-secret-option-item"]],inputs:{enabled:"enabled",active:"active",icon:"icon",checkboxValue:"checkboxValue"},outputs:{action:"action"},ngContentSelectors:e,decls:9,vars:6,consts:[["lines","none",1,"ion-no-padding",3,"disabled","detail","click"],["slot","start"],[1,"avatar--container",3,"ngClass"],[3,"src"],["color","white",1,"ion-text-wrap"],["slot","end","class","ion-no-margin",3,"ngModel","disabled",4,"ngIf"],[4,"ngIf"],["slot","end",1,"ion-no-margin",3,"ngModel","disabled"]],template:function(p,g){1&p&&(t.F$t(),t.ynx(0),t.TgZ(1,"ion-item",0),t.NdJ("click",function(){return g.doAction()}),t.TgZ(2,"ion-avatar",1)(3,"div",2),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-label",4),t.Hsn(6),t.qZA(),t.YNc(7,m,1,2,"ion-checkbox",5),t.qZA(),t.YNc(8,A,2,0,"p",6),t.BQk()),2&p&&(t.xp6(1),t.Q6J("disabled",!g.enabled)("detail",void 0===g.checkboxValue),t.xp6(2),t.Q6J("ngClass",g.active?"background--color__primary":"background--color__tertiary"),t.xp6(1),t.Q6J("src",g.icon),t.xp6(3),t.Q6J("ngIf",void 0!==g.checkboxValue),t.xp6(1),t.Q6J("ngIf",!g.enabled))},directives:[h.Ie,h.BJ,n.mk,h.gu,h.Q$,n.O5,h.nz,h.w,u.JJ,u.On],styles:[".avatar--container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;border-radius:50%}.avatar--container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.background--color__primary[_ngcontent-%COMP%]{background-color:var(--ion-color-primary)}.background--color__tertiary[_ngcontent-%COMP%]{background-color:var(--ion-color-tertiary)}"]}),c})()},62984:(T,f,o)=>{o.d(f,{S:()=>E,O:()=>U});var t=o(65949),h=o(52971),n=o(55956),u=o(27204),m=o(56810),A=o(39141),e=o(9288),r=o(3323),c=o(34388);let d=(()=>{class a{constructor(i,s,l,v){this.alertCtrl=i,this.secretsService=s,this.popoverController=l,this.translateService=v}delete(){this.translateService.get(["secret-edit-delete-popover.title","secret-edit-delete-popover.text","secret-edit-delete-popover.cancel_label","secret-edit-delete-popover.delete_label"]).pipe((0,A.P)()).subscribe(i=>(0,t.mG)(this,void 0,void 0,function*(){const s=i["secret-edit-delete-popover.title"],l=i["secret-edit-delete-popover.text"],v=i["secret-edit-delete-popover.cancel_label"],S=i["secret-edit-delete-popover.delete_label"];(yield this.alertCtrl.create({header:s,message:l,buttons:[{text:v,role:"cancel",handler:()=>{this.popoverController.dismiss().catch((0,n.a1)(n.qj.IONIC_MODAL))}},{text:S,handler:()=>{this.secretsService.remove(this.secret).catch((0,n.a1)(n.qj.SECURE_STORAGE)),this.popoverController.dismiss().catch((0,n.a1)(n.qj.IONIC_MODAL)),this.onDelete&&this.onDelete()}}]})).present().catch((0,n.a1)(n.qj.IONIC_ALERT))}))}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(r.Br),e.Y36(m.R),e.Y36(r.Dh),e.Y36(c.sK))},a.\u0275cmp=e.Xpm({type:a,selectors:[["airgap-secret-edit-popover"]],decls:7,vars:0,consts:[["lines","none",1,"ion-no-padding","ion-no-margin"],["button","","detail","false",3,"click"],["name","md-trash","color","dark","slot","end"]],template:function(i,s){1&i&&(e.TgZ(0,"ion-list",0)(1,"ion-list-header")(2,"ion-label"),e._uU(3,"Settings"),e.qZA()(),e.TgZ(4,"ion-item",1),e.NdJ("click",function(){return s.delete()}),e._UZ(5,"ion-icon",2),e._uU(6," Delete "),e.qZA()())},directives:[r.q_,r.yh,r.Q$,r.Ie,r.gu],styles:[""]}),a})();var p=o(16183),g=o(63181),Z=o(22951),x=o(20976),I=o(23345),y=o(12714),O=o(84653),P=o(40644);function b(a,_){if(1&a&&(e.TgZ(0,"ion-row",18)(1,"ion-col",19),e._UZ(2,"img",20),e.qZA(),e.TgZ(3,"ion-col",21)(4,"div",13),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div")(8,"h5"),e._uU(9),e.qZA()()()()),2&a){const i=e.oxw();e.xp6(2),e.Q6J("src",i.lifehashData,e.LSH),e.xp6(3),e.Oqu(e.lcZ(6,3,"secret-edit.fingerprint")),e.xp6(4),e.Oqu(i.secret.fingerprint)}}function M(a,_){1&a&&(e._UZ(0,"p",12),e.ALo(1,"translate")),2&a&&e.Q6J("innerHTML",e.lcZ(1,1,"secret-edit.secret-recovery-key.reset-text"),e.oJD)}function D(a,_){1&a&&(e._UZ(0,"p",12),e.ALo(1,"translate")),2&a&&e.Q6J("innerHTML",e.lcZ(1,1,"secret-edit.secret-recovery-key.generate-text"),e.oJD)}function L(a,_){if(1&a){const i=e.EpF();e.ynx(0),e.TgZ(1,"p",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"airgap-secret-option-item",22),e.NdJ("action",function(){return e.CHM(i),e.oxw().resetRecoveryPassword()}),e.YNc(5,M,2,3,"p",23),e.YNc(6,D,2,3,"p",23),e.qZA(),e.BQk()}if(2&a){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"secret-edit.secret-recovery-key.label")),e.xp6(2),e.Q6J("icon","assets/icons/md-fiber_pin.svg")("active",i.secret.hasRecoveryKey),e.xp6(1),e.Q6J("ngIf",i.secret.hasRecoveryKey),e.xp6(1),e.Q6J("ngIf",!i.secret.hasRecoveryKey)}}var E=(()=>{return(a=E||(E={}))[a.SET_RECOVERY_KEY=0]="SET_RECOVERY_KEY",E;var a})();let U=(()=>{class a{constructor(i,s,l,v,S,C,J,N,R,Y,Q){if(this.popoverCtrl=i,this.toastCtrl=s,this.alertCtrl=l,this.translateService=v,this.clipboardService=S,this.secretsService=C,this.navigationService=J,this.storageService=N,this.lifehashService=R,this.platform=Y,this.router=Q,this.isGenerating=!1,this.isAndroid=!1,this.lifehashData="",this.isAppAdvancedMode$=this.storageService.subscribe(p.NT.ADVANCED_MODE_TYPE).pipe((0,g.U)(k=>k===p.$r.ADVANCED)),this.navigationService.getState()){if(this.secret=this.navigationService.getState().secret,!this.secret)throw this.router.navigate(["/"]),new Error("[SecretEditPage]: No secret found! Navigating to home page.");this.isAndroid=this.platform.is("android"),this.perform(this.navigationService.getState().action)}}ngOnInit(){return(0,t.mG)(this,void 0,void 0,function*(){this.lifehashData=yield this.lifehashService.generateLifehash(this.secret.fingerprint)})}confirm(){return(0,t.mG)(this,void 0,void 0,function*(){try{yield this.secretsService.addOrUpdateSecret(this.secret)}catch(i){return void(0,n.a1)(n.qj.SECURE_STORAGE)(i)}yield this.dismiss(),this.navigationService.route("").catch((0,n.a1)(n.qj.IONIC_NAVIGATION))})}dismiss(){return(0,t.mG)(this,void 0,void 0,function*(){try{return this.navigationService.routeToSecretsTab()}catch(i){return!1}})}goToSocialRecoverySetup(){this.navigationService.routeWithState("/social-recovery-generate-intro",{secret:this.secret}).catch((0,n.a1)(n.qj.IONIC_NAVIGATION))}goToWalletInteraction(){this.navigationService.routeWithState("/interaction-selection-settings",{secret:this.secret,isEdit:!0}).catch((0,n.a1)(n.qj.IONIC_NAVIGATION))}goToBip85ChildSeed(){this.navigationService.routeWithState("/bip85-generate",{secret:this.secret}).catch((0,n.a1)(n.qj.IONIC_NAVIGATION))}resetRecoveryPassword(){return(0,t.mG)(this,void 0,void 0,function*(){try{const i=yield this.secretsService.resetRecoveryPassword(this.secret);this.showRecoveryKeyAlert(i)}catch(i){this.showToast("secret-edit.secret-recovery-key.reset-error")}})}showMnemonic(){return(0,t.mG)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:this.translateService.instant("secret-edit.show-mnemonic.alert.title"),message:this.translateService.instant("secret-edit.show-mnemonic.alert.message"),backdropDismiss:!1,inputs:[{name:"understood",type:"checkbox",label:this.translateService.instant("secret-edit.show-mnemonic.alert.understood"),value:"understood",checked:!1}],buttons:[{text:"Cancel",role:"cancel"},{text:"Ok",handler:s=>(0,t.mG)(this,void 0,void 0,function*(){if(s.includes("understood")){const l=yield this.secretsService.retrieveEntropyForSecret(this.secret),v=new h.r(l);this.navigationService.routeWithState("secret-show",{secret:v}).catch(S=>console.error(S))}})}]})).present()})}presentEditPopover(i){return(0,t.mG)(this,void 0,void 0,function*(){(yield this.popoverCtrl.create({component:d,componentProps:{secret:this.secret,onDelete:()=>{this.dismiss().catch((0,n.a1)(n.qj.IONIC_MODAL))}},event:i,translucent:!0})).present().catch((0,n.a1)(n.qj.IONIC_MODAL))})}perform(i){i===E.SET_RECOVERY_KEY&&this.resetRecoveryPassword()}showToast(i){return(0,t.mG)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:this.translateService.instant(i),duration:1e3,position:"top",buttons:[{text:"Ok",role:"cancel"}]})).present().catch((0,n.a1)(n.qj.IONIC_ALERT))})}showRecoveryKeyAlert(i){return(0,t.mG)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:this.translateService.instant("secret-edit.secret-recovery-key.alert.title"),subHeader:this.translateService.instant("secret-edit.secret-recovery-key.description"),message:i,buttons:[{text:this.translateService.instant("secret-edit.secret-recovery-key.alert.copy"),handler:()=>{this.clipboardService.copy(i),this.showToast("secret-edit.secret-recovery-key.copied")}},{text:this.translateService.instant("secret-edit.secret-recovery-key.alert.done"),handler:()=>{}}]})).present().catch((0,n.a1)(n.qj.IONIC_ALERT))})}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(r.Dh),e.Y36(r.yF),e.Y36(r.Br),e.Y36(c.sK),e.Y36(x.Yv),e.Y36(m.R),e.Y36(u.f),e.Y36(p.Cu),e.Y36(Z.S),e.Y36(r.t4),e.Y36(I.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["airgap-secret-edit"]],decls:62,vars:68,consts:[[1,"ion-no-border"],["slot","start"],["slot","primary"],[3,"click"],["slot","icon-only","name","ellipsis-horizontal-outline"],[1,"ion-padding"],["class","ion-padding-top",4,"ngIf"],[1,"ion-no-padding"],["color","white","position","floating"],[3,"ngModel","ngModelChange"],[1,"font--weight__med","ion-padding-top"],[3,"enabled","icon","active","checkboxValue"],[3,"innerHTML"],[1,"font--weight__med"],[3,"enabled","icon","active","action"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary","shape","round",3,"disabled","click"],[1,"ion-padding-top"],["size","3"],[1,"lifehash",3,"src"],["size","9"],[3,"icon","active","action"],[3,"innerHTML",4,"ngIf"]],template:function(i,s){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"ion-buttons",2)(8,"ion-button",3),e.NdJ("click",function(v){return s.presentEditPopover(v)}),e._UZ(9,"ion-icon",4),e.qZA()()()(),e.TgZ(10,"ion-content",5)(11,"p"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.YNc(14,b,10,5,"ion-row",6),e.ALo(15,"async"),e.TgZ(16,"ion-item",7)(17,"ion-label",8),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"ion-input",9),e.NdJ("ngModelChange",function(v){return s.secret.label=v}),e.qZA()(),e.TgZ(21,"p",10),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"airgap-secret-option-item",11)(28,"h2"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e._UZ(31,"p",12),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"p",13),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"airgap-secret-option-item",14),e.NdJ("action",function(){return s.goToSocialRecoverySetup()}),e.TgZ(37,"h2"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"p",12),e.ALo(41,"translate"),e.qZA(),e.YNc(42,L,7,7,"ng-container",15),e.TgZ(43,"p",13),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"airgap-secret-option-item",14),e.NdJ("action",function(){return s.goToBip85ChildSeed()}),e.TgZ(47,"h2"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e._UZ(50,"p",12),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"p",13),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"airgap-secret-option-item",14),e.NdJ("action",function(){return s.showMnemonic()}),e._UZ(56,"p",12),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"ion-fab",16)(59,"ion-button",17),e.NdJ("click",function(){return s.confirm()}),e._uU(60),e.ALo(61,"translate"),e.qZA()()()),2&i&&(e.xp6(5),e.AsE("","Edit"," ",e.lcZ(6,34,"secret-edit.title"),""),e.xp6(7),e.Oqu(e.lcZ(13,36,"secret-edit.text")),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,38,s.isAppAdvancedMode$)),e.xp6(4),e.Oqu(e.lcZ(19,40,"secret-edit.secret_input_label")),e.xp6(2),e.Q6J("ngModel",s.secret.label),e.xp6(2),e.Oqu(e.lcZ(23,42,"secret-edit.security-level.heading")),e.xp6(3),e.Oqu(e.lcZ(26,44,"secret-edit.security-level.text")),e.xp6(2),e.Q6J("enabled",!1)("icon","assets/icons/shield-checkmark.svg")("active",s.secret.isParanoia)("checkboxValue",s.secret.isParanoia),e.xp6(2),e.Oqu(e.lcZ(30,46,"secret-edit.passcode.label")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(32,48,"secret-edit.passcode.text"),e.oJD),e.xp6(3),e.Oqu(e.lcZ(35,50,"secret-edit.secret-recovery.heading")),e.xp6(2),e.Q6J("enabled",!0)("icon","assets/icons/extension-puzzle.svg")("active",s.secret.hasSocialRecovery),e.xp6(2),e.Oqu(e.lcZ(39,52,"secret-edit.social-recovery.label")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(41,54,"secret-edit.social-recovery.text"),e.oJD),e.xp6(2),e.Q6J("ngIf",s.isAndroid),e.xp6(2),e.Oqu(e.lcZ(45,56,"secret-edit.advanced")),e.xp6(2),e.Q6J("enabled",!0)("icon","assets/icons/md-swap_horiz.svg")("active",!1),e.xp6(2),e.Oqu(e.lcZ(49,58,"secret-edit.bip85.generate")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(51,60,"secret-edit.bip85.text"),e.oJD),e.xp6(3),e.Oqu(e.lcZ(54,62,"secret-edit.show-mnemonic.label")),e.xp6(2),e.Q6J("enabled",!0)("icon","assets/icons/md-fiber_pin.svg")("active",!1),e.xp6(1),e.Q6J("innerHTML",e.lcZ(57,64,"secret-edit.show-mnemonic.text"),e.oJD),e.xp6(3),e.Q6J("disabled",s.secret.label.length<1),e.xp6(1),e.hij(" ",e.lcZ(61,66,"secret-edit.confirm_label")," "))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.YG,r.gu,r.W2,y.O5,r.Nd,r.wI,r.Ie,r.Q$,r.pK,r.j9,O.JJ,O.On,P.E,r.IJ],pipes:[c.X$,y.Ov],styles:["p[_ngcontent-%COMP%]{color:#fff}ion-content[_ngcontent-%COMP%]{--padding-bottom: var(--ion-padding, 64px)}"]}),a})()},51628:(T,f,o)=>{o.d(f,{D:()=>h});var t=o(9288);let h=(()=>{class n{}return n.\u0275fac=function(m){return new(m||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[]]}),n})()}}]);